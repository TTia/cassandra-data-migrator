# ============================================================================
# Cassandra Data Migrator - PostgreSQL Target Configuration
# ============================================================================
# Basic configuration for migrating data from Cassandra to PostgreSQL

# --------------------------------------------------------------------------
# Origin Cassandra Connection
# --------------------------------------------------------------------------
spark.cdm.connect.origin.host=cassandra-origin.example.com
spark.cdm.connect.origin.port=9042
spark.cdm.connect.origin.username=cassandra_user
spark.cdm.connect.origin.password=cassandra_password
spark.cdm.schema.origin.keyspaceTable=source_keyspace.source_table

# --------------------------------------------------------------------------
# Target PostgreSQL Connection
# --------------------------------------------------------------------------
# Target type must be set to "postgres" or "postgresql"
spark.cdm.connect.target.type=postgres

# JDBC connection URL
spark.cdm.connect.target.postgres.url=jdbc:postgresql://postgres-host:5432/target_database

# Authentication
spark.cdm.connect.target.postgres.username=postgres_user
spark.cdm.connect.target.postgres.password=postgres_password

# Target schema and table (defaults to origin keyspace/table names if not specified)
spark.cdm.connect.target.postgres.schema=public
spark.cdm.connect.target.postgres.table=target_table

# --------------------------------------------------------------------------
# Connection Pool Settings
# --------------------------------------------------------------------------
# Maximum number of connections in the pool (default: 10)
spark.cdm.connect.target.postgres.pool.size=10

# Connection timeout in milliseconds (default: 30000)
spark.cdm.connect.target.postgres.pool.timeout=30000

# --------------------------------------------------------------------------
# Write Settings
# --------------------------------------------------------------------------
# Number of records per batch (default: 1000)
spark.cdm.connect.target.postgres.batchSize=1000

# Upsert mode: "insert" for INSERT only, "upsert" for INSERT ON CONFLICT UPDATE
spark.cdm.connect.target.postgres.upsertMode=upsert

# Number of records per transaction (default: 5000)
spark.cdm.connect.target.postgres.transactionSize=5000

# --------------------------------------------------------------------------
# Type Handling
# --------------------------------------------------------------------------
# Convert Cassandra MAP to PostgreSQL JSONB (default: true)
spark.cdm.connect.target.postgres.mapToJsonb=true

# Convert Cassandra UDT to PostgreSQL JSONB (default: true)
spark.cdm.connect.target.postgres.udtToJsonb=true

# --------------------------------------------------------------------------
# Performance Settings
# --------------------------------------------------------------------------
# Rate limit for reading from origin (records per second)
spark.cdm.perfops.ratelimit.origin=20000

# Rate limit for writing to target (records per second)
spark.cdm.perfops.ratelimit.target=40000

# Fetch size for reading from Cassandra
spark.cdm.perfops.fetchSizeInRows=1000

# Batch size for Spark operations
spark.cdm.perfops.batchSize=5
